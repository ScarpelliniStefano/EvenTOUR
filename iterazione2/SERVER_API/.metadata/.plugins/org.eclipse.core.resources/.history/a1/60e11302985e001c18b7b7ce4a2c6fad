package com.scarcolo.eventour.repository.manager;


import java.util.List;
import java.util.Optional;

import org.bson.types.ObjectId;
import org.springframework.boot.autoconfigure.data.web.SpringDataWebProperties.Sort;
import org.springframework.data.mongodb.core.aggregation.AggregationResults;
import org.springframework.data.mongodb.repository.Aggregation;
import org.springframework.data.mongodb.repository.MongoRepository;
import org.springframework.data.mongodb.repository.Query;

import com.scarcolo.eventour.model.manager.Manager;
import com.scarcolo.eventour.model.manager.ReportManResponse;
import com.scarcolo.eventour.model.request.Request;

// TODO: Auto-generated Javadoc
/**
 * The Interface RequestRepository.
 */
public interface RequestRepository extends MongoRepository<Request, String>{

	
	List<Request> findByManagerId(String id);

	@Query("{active : true, dateRenewal: { $lte : new Date(ISODate().getTime() - 1000 * 86400 * 365)}}")
	List<Request> findAllActivePassed(Sort sort);

	@Query("{active : true, dateRenewal: { $gt : new Date(ISODate().getTime() - 1000 * 86400 * 365)}}")
	List<Request> findAllActiveNotPassed(Sort sort);

	@Query("{active : false}")
	List<Request> findAllNotActive(Sort sort);

	
	
}
